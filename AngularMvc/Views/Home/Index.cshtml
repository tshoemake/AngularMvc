@model IEnumerable<Database.DTO.DTOPerson>

@{
    ViewBag.Title = "Home Page";
}

<link href="~/Content/bootstrap.min.css" rel="stylesheet" />
<script src="~/Scripts/jquery-1.12.4.min.js"></script>
<link href="~/Content/themes/base/jquery-ui.css" rel="stylesheet" />
<script src="~/Scripts/bootstrap.min.js"></script>
<script src="~/Scripts/jquery-ui-1.12.1.min.js"></script>
<script src="~/Scripts/angular.min.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/angularjs/1.5.8/angular-animate.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/angularjs/1.5.8/angular-sanitize.js"></script>
<script src="~/Scripts/angular-ui/ui-bootstrap-tpls.min.js"></script>
<link href="~/Content/ui-bootstrap-csp.css" rel="stylesheet" />
<script src="~/Scripts/PageSpecific/angularCode.js"></script>
<link href="~/Content/font-awesome.min.css" rel="stylesheet" />
<script src="~/Scripts/PageSpecific/Index.js"></script>

<div ng-app="PersonApp" class="container">
    <div ng-controller="PersonController">
        <div class="mb20 mt15">
            <input type="text" placeholder="Search Person" ng-model="searchPerson" />
            <button type="button" class="btn btn-primary pull-right mb15" data-toggle="modal" ng-model="addPersonModel" ng-click="addPerson()">Add New</button>
        </div>

        <div ng-controller="PaginationDemoCtrl">
            <table class="table header-fixed">
                <thead>
                    <tr>
                        <th ng-click="sortData('Id')">
                            ID <div ng-class="getSortClass('Id')"></div>
                        </th>
                        <th ng-click="sortData('firstName')">
                            First Name <div ng-class="getSortClass('firstName')"></div>
                        </th>
                        <th ng-click="sortData('lastName')">
                            Last Name <div ng-class="getSortClass('lastName')"></div>
                        </th>
                        <th ng-click="sortData('birthDate')">
                            BirthDate <div ng-class="getSortClass('birthDate')"></div>
                        </th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="person in filteredPersons | orderBy: sortColumn:reverseSort | filter : searchPerson">
                        <td>{{person.Id}}</td>
                        <td>{{person.firstName}}</td>
                        <td>{{person.lastName}}</td>
                        <td>{{person.birthDate | date:"MM/dd/yyyy"}}</td>
                        <td>
                            <a href="" data-toggle="icon-tooltip" data-placement="bottom" title="Edit Record" ng-model="editPersonModel" ng-click="editPerson(person)"><span class="fa fa-pencil-square-o"></span></a>
                            <a href="" data-toggle="icon-tooltip" data-placement="bottom" title="Remove Record" ng-model="removePersonModel" ng-click="removePersonDialog(person)"><span class="fa fa-remove"></span></a>
                        </td>
                    </tr>
                </tbody>
            </table>
            <ul uib-pagination total-items="persons.length" ng-model="currentPage" max-size="maxSize" class="pagination-sm" boundary-links="true" rotate="false" items-per-page="numPerPage" num-pages="numPages"></ul>
            <pre>Page: {{currentPage}} / {{numPages}}</pre>
        </div>
    </div>
</div>
<style>
    /*This class displays the UP arrow*/
    .arrow-up {
        width: 0;
        height: 0;
        border-left: 5px solid transparent;
        border-right: 5px solid transparent;
        border-bottom: 10px solid black;
        display: inline-block;
    }

    /*This class displays the DOWN arrow*/
    .arrow-down {
        width: 0;
        height: 0;
        border-left: 5px solid transparent;
        border-right: 5px solid transparent;
        border-top: 10px solid black;
        display: inline-block;
    }

    .mb20 {
        margin-bottom: 20px;
    }

    .mt15 {
        margin-top: 15px;
    }

    .scrollable {
        height: 500px;
        overflow: auto;
    }

    tr:hover td {
        background-color: #428bca;
        color: white;
    }

    tr:hover span.fa {
        color: white;
    }

    .left-align > td {
        text-align: left;
    }

    .header-fixed {
        width: 100%;
    }

        .header-fixed > thead,
        .header-fixed > tbody,
        .header-fixed > thead > tr,
        .header-fixed > tbody > tr,
        .header-fixed > thead > tr > th,
        .header-fixed > tbody > tr > td {
            display: block;
        }

            .header-fixed > tbody > tr:after,
            .header-fixed > thead > tr:after {
                content: ' ';
                display: block;
                visibility: hidden;
                clear: both;
            }

        .header-fixed > tbody {
            overflow-y: auto;
            height: calc(100% - 37px);
        }

            .header-fixed > tbody > tr > td,
            .header-fixed > thead > tr > th {
                width: 20%; /* 100% / 5(cols) = 20 */
                max-width: 218px; /* needed to properly line cols (scrollbar in tbody offsets by ~4px */
                float: left;
            }

        .header-fixed > thead > tr > th {
            white-space: nowrap;
            background-color: #D4D4D4;
        }
</style>
